{
  "unpublishedCollection": {
    "name": "Helper",
    "pageId": "Key Person Add India",
    "pluginId": "js-plugin",
    "pluginType": "JS",
    "actions": [],
    "archivedActions": [],
    "body": "export default {\n\tget_data: (personOID) => {\n\t\tconst formFields = List1.items;\n\t\t//const personOID = 3;\n\t\treturn formFields.map((item,idx) => {\n\t\t\t\t\t\treturn `(\n\t\t\t\t\t\t  '${utils.generateOID(20)}',\n\t\t\t\t\t\t\t'${personOID}',\n\t\t\t\t\t\t\t'${personOID}',\n\t\t\t\t\t\t\t'${appsmith.store.customerOID}',\n\t\t\t\t\t\t\t'${appsmith.store.customerID}',\n\t\t\t\t\t\t\t'${'Key Person India'}',\n\t\t\t\t\t\t\t'${item.Text8.text[idx]}',\n\t\t\t\t\t\t\t${item.Input20.text}\n\t\t\t\t\t\t\t)`;\n\t\t}).join(',')\n},\n\tdummy:() => {\n\t\tconst formFields = List1.items;\n\t\treturn formFields.map((item,idx)=>{ \n\t\t\treturn `'${item.Text8.text[idx]}',\n\t\t\t${(item.Input20.text)},\n\t\t\t${(item.vayCurrencyLimitOID.text)}`;\n\t\t} );\n\t},\n\tupdateKeyPersonCurrencyLimitold:() =>{\n\t\t \tconst formFields = List1.items; \n\t\t return formFields.map((item,idx)=>{ \n\t\t\t return  `UPDATE APS_CUSTOMER_KEY_PERSON_CURRENCYLIMIT SET CUSTOMER_KEY_PERSON_CURRENCY_LIMIT ='${(item.Input20.text)}' WHERE OID = '${(getKeyPersonCurrencyLimit.data[idx].OID)}'`\n\t\t\t //return formFields\n\t\t} );\n\t},\n\tformList: ()=>{\n\t\tconst formFields = List1.items; \n\t\treturn formFields;\n\t},\n\tgetKeyPersonData: ()=>{\n\t\treturn appsmith.store.keyPersonData;\n\t},\n\tgetKeyPersonCurrencyLimitData: ()=>{\n\t\tconsole.log('Key Person Limit Currencies fecthed :',getKeyPersonCurrencyLimit.data);\n\t\tif(getKeyPersonCurrencyLimit.data.length>0){\n\t\t\treturn getKeyPersonCurrencyLimit.data;\n\t\t}else{\n\t\t\tconst  selectedCurrency = appsmith.store.vayCCY;\n\t\t\tconsole.log('In Static Currencies', selectedCurrency);\n\t\t\treturn  appsmith.store.vayCCY.map((item) =>{\n\t\t\t\t return ({\n\t\t\t\t\t\t\tCUSTOMER_KEY_PERSON_CURRENCY_CODE_FORADMTXN:item,\n\t\t\t\t\t\t\tCUSTOMER_KEY_PERSON_CURRENCY_LIMIT:0\n\t\t\t\t});\n\t\t});\n\t\t}\n\t},\n\tupdateKeyPersonCurrencyLimitQuery: async ()=>{\n\t\t\tconst updates = this.updateKeyPersonCurrencyLimitString();\n\t\t\tupdates.forEach((updatedItem) =>{\n\t\t\t\t\t\tconsole.log('updatedItem-',updatedItem);\n\t\t\t\t\t //const return_currencyresponse = updateKeyPersonCurrencyLimit.run({currencyLimitOID:updatedItem.oid, currencyLimit:updatedItem.limit});\n\t\t\t\t\t const return_currencyresponse = updateKeyPersonCurrencyLimit.run({currencyLimitOID:updatedItem.oid, currencyLimit:updatedItem.limit});\n\t\t\t\t   if(!!return_currencyresponse){\n\t\t\t\t\t\t console.log(\"Success\",return_currencyresponse);\n\t\t\t\t\t }else{\n\t\t\t\t\t\t console.log(\"Error\",return_currencyresponse);\n\t\t\t\t\t }\n\t});\n\t},\n\tgetCurrencies: ()=>{\n\t\treturn appsmith.store.vayCCY;\n\t},\n\tupdateKeyPersonCurrencyLimitString:() =>{\t\t\n\t\t\tconst formFields = List1.items;\n\t\t  //console.log('Form List',formFields);\n\t\t\treturn formFields.map((item,idx) =>{ \n\t\t\t\treturn ({\n\t\t\t\t\tlimit:item.Input20.text,\n\t\t\t\t\toid : getKeyPersonCurrencyLimit.data[idx].OID\n\t\t\t\t});\t\t\t\n\t\t\t});\n  },\n\tgetStore:() =>{\n\t\treturn appsmith.store;\n }\n}\n",
    "variables": []
  },
  "id": "Key Person Add India_Helper",
  "deleted": false,
  "gitSyncId": "61e6589e69c0e21f279fec21_6201229d1cafa2361db3d131"
}